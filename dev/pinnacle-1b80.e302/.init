#!/bin/bash
# sourced by the other scripts

_VIDEO_DEVICE=($(v4l2-ctl --list-devices | awk '/Pinnacle/{getline; print}'))

# always unmute
v4l2-ctl -d ${_VIDEO_DEVICE} -c mute=0

# which input is in use
_VIDEO_INPUT=($(v4l2-ctl --get-input))
_VIDEO_INPUT_ID=${_VIDEO_INPUT[3]}
_VIDEO_INPUT_NAME="${_VIDEO_INPUT[@]:4}"

# video format defaults
_PREVIEW_FILTER=""
_VIDEO_ASPECT="1:1"
_VIDEO_HEIGHT="480"
_VIDEO_WIDTH="640"

_VIDEO_NORM=($(v4l2-ctl --get-standard))
_VIDEO_NORM=${_VIDEO_NORM[4]}

# video format selection
case ${_VIDEO_NORM} in
    NTSC-M)
        _PREVIEW_FILTER="-vf yadif"
        _VIDEO_ASPECT="4:3"
        _VIDEO_HEIGHT="480"
        _VIDEO_WIDTH="720"
    ;;
esac


_ALSA_ID=($(cat /proc/asound/cards | grep 'USB 2861 Device'))
